# キュレーションボード - 機能要件定義書

## 1. サービス概要

### 1.1 サービスコンセプト
ユーザーが自分の好きなもの（アニメ、ゲーム、キャラクター、食べ物、歌手など）を7行3列のボード形式で整理し、視覚的に表現・共有できるサービス。

### 1.2 類似サービス
- lit.link（ベンチマーク）

## 2. 用語定義

| 用語 | 定義 |
|------|------|
| キュレーションボード | 7行3列（計21個）のマス目に好きなものを配置したボード |
| テーマ | 各マス目に設定する項目（例：「好きなアニメ」「好きな食べ物」） |
| テンプレート | 21個のテーマがセットになったもの |
| 公式テンプレート | サービス側が事前に用意したテンプレート |
| カスタムテンプレート | ユーザーが独自に作成したテンプレート |

## 3. 主要機能一覧

1. ログイン機能
2. 価値観ボード作成機能
3. 価値観ボードSNSシェア機能
4. 他ユーザーのボード閲覧機能

## 4. 機能詳細

### 4.1 ログイン機能

#### 4.1.1 ユーザー登録

- Googleアカウントで認証
- プロフィール登録
  - 名前
  - ユーザーID
  - プロフィール画像

#### 4.1.2 ログイン方法

- Googleログイン

### 4.2 価値観ボード作成機能

#### 4.2.1 テンプレート選択
- **公式テンプレート選択**
  - サービス側が用意した複数のテンプレートから選択
  - テンプレート例：
    - 「エンタメ好き向け」（アニメ、映画、ゲーム等）
    - 「グルメ好き向け」（食べ物、飲み物、レストラン等）
    - 「総合版」（バランス型）

- **カスタムテンプレート作成**
  - 21個のテーマを自由に設定
  - テーマ名は任意のテキスト入力（例：「好きなアニメ」「推しキャラ」）
  - 作成したカスタムテンプレートの保存・再利用

#### 4.2.2 ボード編集
- **基本仕様**
  - 7行3列のグリッドレイアウト
  - 各マス目にテーマに沿った内容を入力
  
- **入力方法**
  - テキスト入力or画像アップロード
  - 文字数制限：1マスあたり15文字

- **編集操作**
  - マス目ごとの個別編集
  - 一時保存機能
  - やり直し・取り消し機能（検討）

#### 4.2.3 デザインカスタマイズ

- 背景画像設定
- 文字色設定

#### 4.2.4 保存機能
- **保存処理**
  - ボード内容をデータベースに保存
  - 画像として書き出し（PNG形式）
  - 生成された画像をオブジェクトストレージに保存
  - 保存時にプレビュー表示

- **公開設定**
  - 公開/非公開の選択
  - 限定公開（URLを知っている人のみ）

#### 4.2.5 ボード管理
- 作成したボード一覧表示
- ボードの編集・削除
- ボードの複製機能
- 下書き保存機能

### 4.3 SNSシェア機能

#### 4.3.1 シェア対象SNS

- Twitter/X

#### 4.3.2 シェア時の動作
- **Twitter/X投稿**
  - 生成された画像を自動添付z
  - デフォルトテキスト自動挿入（編集可能）
    - 例：「私の価値観ボードを作りました！ #価値観ボード」
  - ボードへのリンクURL自動挿入

#### 4.3.3 シェア用URL
- ボードごとにユニークなURL生成
- OGP設定（タイトル、説明文）

### 4.4 他ユーザーのボード閲覧機能

#### 4.4.1 ボード閲覧
- **閲覧方法**
  - 直接URL指定

- **表示内容**
  - 価値観ボード（再現レイアウト）
  - 作成者情報（ユーザー名、プロフィール画像）
  - 作成日時

## 5. 画面遷移
```
ログイン画面
  ↓
ホーム画面（マイページ）
  ├→ ボード作成画面
  │   ├→ テンプレート選択
  │   ├→ ボード編集
  │   └→ プレビュー → 保存 → シェア
  ├→ マイボード一覧
  │   └→ ボード詳細 → 編集/削除/シェア
  └→ 他ユーザーのボード閲覧

ユーザー設定画面
```

## 6. 技術スタック

- フロントエンド: Next.js, TypeScript, Mantine
- バックエンド: Cloud Functions + TypeScript
- データベース: Firestore(NoSQL)
- オブジェクトストレージ: Cloud Storage for Firebase
- 認証: Firebase Authentication

## 7. データ構造

### 7.1 コレクション設計

- boards: 価値観ボード一覧
  - ドキュメントID: 自動生成
- templates: テンプレート一覧
  - ドキュメントID: 自動生成
- users: ユーザー一覧
  - ドキュメントID: Firebase AuthのUid

### 7.2 DB設計

```
Firestore
├── boards: 価値観ボード一覧コレクション
│   ├── backgroundImageUrl: String 背景画像URL
│   ├── createdAt: Timestamp 作成日時
│   ├── items: Array<Object>
│   │   ├── label: String テーマ名
│   │   └── value: String テーマ内容
│   ├── styleBackgroundColor: String ボードの背景色
│   ├── styleTextColor: String ボードの文字色
│   ├── title: String タイトル
│   ├── updatedAt: Timestamp 更新日時
│   └── userId: String 作成したユーザーのUid
├── templates: テンプレート一覧コレクション
│   ├── createdAt: Timestamp 作成日時
│   ├── createdBy: UserId | null 作成者のUid
│   ├── itemLabels: Array<String> テーマ名の配列
│   ├── type: String('official' | 'custom')
│   └── updatedAt: Timestamp 更新日時
└── users: ユーザー一覧コレクション
    ├── createdAt: Timestamp 作成日時
    ├── displayName: String 表示名
    ├── email: String Googleログインに使用したメールアドレス
    ├── profileImageUrl: String プロフィール画像URL
    ├── updatedAt: Timestamp 更新日時
    └── username: String ユーザーID
```